import React, { useState } from "react";
import {
  AppBar,
  Toolbar,
  IconButton,
  Typography,
  Menu,
  MenuItem,
  Button,
  Drawer,
  List,
  ListItem,
  ListItemText,
  ListItemIcon,
  Box,
} from "@mui/material";
import MenuIcon from "@mui/icons-material/Menu";
import AccountCircleIcon from "@mui/icons-material/AccountCircle";
import HomeIcon from "@mui/icons-material/Home";
import InfoIcon from "@mui/icons-material/Info";
import ContactMailIcon from "@mui/icons-material/ContactMail";
import ArrowDropDownIcon from "@mui/icons-material/ArrowDropDown";

export default function ResponsiveNav() {
  const [anchorEl, setAnchorEl] = useState(null);
  const [contactMenuAnchor, setContactMenuAnchor] = useState(null);
  const [isDrawerOpen, setDrawerOpen] = useState(false);

  const handleMenuClick = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
  };

  const handleContactMenuClick = (event) => {
    setContactMenuAnchor(event.currentTarget);
  };

  const handleContactMenuClose = () => {
    setContactMenuAnchor(null);
  };

  const toggleDrawer = () => {
    setDrawerOpen(!isDrawerOpen);
  };

  const menuItems = ["Profile", "Settings", "Logout"];

  const sideNavItems = [
    { text: "Home", icon: <HomeIcon /> },
    { text: "About", icon: <InfoIcon /> },
    { text: "Contact", icon: <ContactMailIcon /> },
  ];

  const contactSubMenuItems = ["Slack", "Email"];

  return (
    <Box>
      {/* AppBar */}
      <AppBar
        position="fixed"
        sx={{ zIndex: (theme) => theme.zIndex.drawer + 1 }}
      >
        <Toolbar>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
            MyApp
          </Typography>
          <Box sx={{ display: { xs: "none", sm: "block" } }}>
            <Button color="inherit">Home</Button>
            <Button color="inherit">About</Button>
            <Button
              color="inherit"
              endIcon={<ArrowDropDownIcon />}
              onClick={handleContactMenuClick}
            >
              Contact
            </Button>
            <Menu
              anchorEl={contactMenuAnchor}
              open={Boolean(contactMenuAnchor)}
              onClose={handleContactMenuClose}
            >
              {contactSubMenuItems.map((item, index) => (
                <MenuItem key={index} onClick={handleContactMenuClose}>
                  {item}
                </MenuItem>
              ))}
            </Menu>
          </Box>
          <IconButton color="inherit" onClick={handleMenuClick}>
            <AccountCircleIcon />
          </IconButton>
          <Menu
            anchorEl={anchorEl}
            open={Boolean(anchorEl)}
            onClose={handleMenuClose}
          >
            {menuItems.map((item, index) => (
              <MenuItem key={index} onClick={handleMenuClose}>
                {item}
              </MenuItem>
            ))}
          </Menu>
          <IconButton
            edge="end"
            color="inherit"
            aria-label="menu"
            onClick={toggleDrawer}
          >
            <MenuIcon />
          </IconButton>
        </Toolbar>
      </AppBar>

      {/* Side Navigation Drawer */}
      <Drawer
        anchor="right"
        open={isDrawerOpen}
        onClose={toggleDrawer}
        sx={{
          "& .MuiDrawer-paper": {
            width: 240,
          },
        }}
      >
        <List>
          {sideNavItems.map((item, index) => (
            <ListItem button key={index}>
              <ListItemIcon>{item.icon}</ListItemIcon>
              <ListItemText primary={item.text} />
            </ListItem>
          ))}
        </List>
      </Drawer>

      {/* Main Content */}
      <Box sx={{ marginTop: 8, padding: 2 }}>
        <Typography variant="h4">Welcome to MyApp!</Typography>
        <Typography variant="body1">This is a responsive navigation example.</Typography>
      </Box>
    </Box>
  );
}
